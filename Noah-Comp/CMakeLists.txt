#set(SRCS lnd_comp_nuopc.F90)

### Create target library and set PUBLIC interfaces on the library
add_library(lnd_comp STATIC
	    clm_varctl.F90
	    # decompInitMod.F90
	    # domainMod.F90
	    lnd_comp_nuopc.F90
	    lnd_import_export.F90
	    lnd_set_decomp_and_domain.F90
	    nuopc_shr_methods.F90
	    shr_file_mod.F90
	    shr_kind_mod.F90
	    shr_log_mod.F90
	    shr_sys_mod.F90
	    spmdMod.F90
	    noah_driver.F90
	    noah_type.F90
	    field_print_debug.F90 # tmp test
	    import_2_export_test.F90 # tmp test
	    import_fields.F90
	    proc_bounds.F90
	    ccpphys_files/funcphys.f90
	    ccpphys_files/machine.F
	    ccpphys_files/sfc_diff.f
	    ccpphys_files/sfc_drv.f
	    ccpphys_files/sfc_drv_loop.F90
	    ccpphys_files/surface_perturbation.F90
	    ccpphys_files/physcons.F90
	    ccpphys_files/set_soilveg.f
	    ccpphys_files/namelist_soilveg.f
	    )
set_target_properties(lnd_comp PROPERTIES Fortran_MODULE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/mod)
target_compile_definitions(lnd_comp PUBLIC "${_lnd_comp_defs}")
target_include_directories(lnd_comp PUBLIC $<BUILD_INTERFACE:${CMAKE_CURRENT_BINARY_DIR}/mod>
                                       $<INSTALL_INTERFACE:mod>)

#target_link_libraries(lnd_comp PUBLIC esmf ccppphys)
target_link_libraries(lnd_comp PUBLIC esmf fms)



#add_dependencies(lnd_comp fv3dycore)

###############################################################################
### Install
###############################################################################

install(
  TARGETS lnd_comp
  EXPORT  lnd_comp-config
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib
  COMPONENT Library)

install(DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/mod DESTINATION ${CMAKE_INSTALL_PREFIX}/LND_COMP)

install(EXPORT      lnd_comp-config
        DESTINATION lib/cmake)

